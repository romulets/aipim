(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8586:(e,t,s)=>{Promise.resolve().then(s.bind(s,6716))},6716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var l=s(5155),a=s(2115),n=s(5565),c=s(6531);class i{constructor(){this.defaultRelatedEntities=[],this.defaultActor="",this.sources=[]}}class r{constructor(e){this.sourceName="",this.events=[],this.relatedEntityFields=[],e&&(this.sourceName=e)}}class o{constructor(e){this.eventName="",this.targetFields=[],this.actorField="",e&&(this.eventName=e)}}class d{constructor(){this.default=!1,this.sources=-1}}function m(){let[e,t]=(0,a.useState)(new i),[s,m]=(0,a.useState)(new d),[u,h]=(0,a.useState)(""),x=(0,a.useCallback)(()=>{m(()=>({default:!s.default,sources:-1}))},[s]),p=e=>()=>{if(s.sources==e){m(()=>new d);return}m(()=>({default:!1,sources:e}))},f=e=>e?"collapse-arrow-open":"collapse-arrow-closed",v=e=>e?"collapse-body-open":"collapse-body-closed",N=null,j=s=>{null!=N&&N.abort(),N=new AbortController;let l={...e,...s};t(l),(async()=>{let e=await fetch("".concat("","/api/mapping/to-painless"),{method:"POST",mode:"cors",body:JSON.stringify(l),headers:{"Content-Type":"application/json"},signal:N.signal});h(await e.text()),N=null})()},b=null,g=e=>{null!=b&&b.abort(),b=new AbortController,h(e),(async()=>{let s=await fetch("".concat("","/api/mapping/from-painless"),{method:"POST",mode:"cors",body:e,signal:b.signal});t(await s.json()),b=null})()};return(0,l.jsxs)("div",{className:"h-screen",children:[(0,l.jsxs)("div",{className:"header flex h-[7dvh] p-2",children:[(0,l.jsx)(n.default,{className:"w-8 flex-none",src:"/aipim-background.svg",alt:"Aipim Logo",width:30,height:30,priority:!0}),(0,l.jsx)("h1",{className:"flex-none p-2",children:"Aipim"})]}),(0,l.jsxs)("main",{className:"flex h-[89dvh]",children:[(0,l.jsxs)("section",{className:"flex-1 p-5 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"form-section mb-2 flex flex-col",children:[(0,l.jsxs)("button",{onClick:x,className:"p-2 flex-1 text-left",children:[(0,l.jsx)(n.default,{className:"inline mr-3 collapse-arrow ".concat(f(s.default)),src:"arrow.svg",alt:"icon collapse",width:5,height:5,priority:!0}),(0,l.jsx)("b",{children:"Default Values"})]}),(0,l.jsxs)("div",{className:"collapse-body ".concat(v(s.default)),children:[(0,l.jsxs)("div",{className:"flex p-2",children:[(0,l.jsx)("label",{className:"mr-2 p-1 form-label",htmlFor:"default-actor",children:"Default actor"}),(0,l.jsx)("input",{className:"text-input p-1  w-4/5",type:"text",id:"default-actor",name:"default-actor",onChange:e=>j({defaultActor:e.target.value}),value:e.defaultActor})]}),(0,l.jsxs)("div",{className:"inc-list-header flex",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("label",{className:"title",children:"Default Related Entities"})}),(0,l.jsx)("button",{className:"flex-2 main-btn add-btn",onClick:()=>j({defaultRelatedEntities:[...e.defaultRelatedEntities,""]}),children:"+ Add Related Entity"})]}),(0,l.jsx)("div",{className:"inc-list p-4 pr-2 m-2 mt-5 mr-0",children:0==e.defaultRelatedEntities.length?(0,l.jsx)("p",{children:"No default related entities"}):e.defaultRelatedEntities.map((t,s)=>(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("input",{className:"text-input p-1",type:"text",onChange:t=>{let l=[...e.defaultRelatedEntities];l[s]=t.target.value,j({defaultRelatedEntities:l})},value:e.defaultRelatedEntities[s]}),(0,l.jsx)("button",{className:"col-span-1 main-btn remove-btn",onClick:()=>{let t=[...e.defaultRelatedEntities];t.splice(s,1),j({defaultRelatedEntities:t})},children:"-"})]},"default-related-".concat(s)))})]})]}),(0,l.jsxs)("div",{className:"form-section mb-2 p-2 flex contrast",children:[(0,l.jsx)("h2",{className:"font-bold flex-1",children:"Event Sources"}),(0,l.jsx)("button",{onClick:()=>{let t=e.sources.length;j({sources:[...e.sources,new r("aws_source")]}),p(t)()},className:"main-btn flex-3 sm",children:"+ Add Event Source"})]}),e.sources.map((t,a)=>{let c=s.sources==a,i=t=>{e.sources[a]={...e.sources[a],...t},j({...e})};return(0,l.jsxs)("div",{className:"form-section mb-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("button",{onClick:p(a),className:"p-2 flex-1 text-left",children:[(0,l.jsx)(n.default,{className:"inline mr-3 collapse-arrow ".concat(f(s.sources==a)),src:"arrow.svg",alt:"icon collapse",width:5,height:5,priority:!0}),(0,l.jsx)("b",{children:t.sourceName})," ",(0,l.jsx)("small",{children:"event source"})]}),(0,l.jsx)("div",{className:"flex-3 content-center mr-1",children:(0,l.jsx)("button",{className:"main-btn sm",onClick:()=>{let t=[...e.sources];t.splice(a,1),j({sources:t}),c&&m(new d)},children:"- Remove Source"})})]}),(0,l.jsxs)("div",{className:"collapse-body ".concat(v(s.sources==a)),children:[(0,l.jsxs)("div",{className:"flex p-2",children:[(0,l.jsx)("label",{className:"mr-2 p-1 form-label",htmlFor:"source-name-".concat(a),children:"Source name"}),(0,l.jsx)("input",{className:"text-input p-1",type:"text",id:"source-name-".concat(a),name:"source-name-".concat(a),onChange:e=>i({sourceName:e.target.value}),value:e.sources[a].sourceName})]}),(0,l.jsxs)("div",{className:"inc-list-header flex",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("label",{className:"title",children:"Related Entities"})}),(0,l.jsx)("button",{className:"flex-2 main-btn add-btn",onClick:()=>i({relatedEntityFields:[...t.relatedEntityFields,""]}),children:"+ Add Related Entity"})]}),(0,l.jsx)("div",{className:"inc-list p-4 pr-2 m-2 mt-5 mr-0",children:0==t.relatedEntityFields.length?(0,l.jsx)("p",{children:"No specific related entities"}):t.relatedEntityFields.map((e,s)=>(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("input",{className:"text-input p-1",type:"text",onChange:e=>{let l=[...t.relatedEntityFields];l[s]=e.target.value,i({relatedEntityFields:l})},value:t.relatedEntityFields[s]}),(0,l.jsx)("button",{className:"col-span-1 main-btn remove-btn",onClick:()=>{let e=[...t.relatedEntityFields];e.splice(s,1),i({relatedEntityFields:e})},children:"-"})]},"default-related-".concat(s)))}),(0,l.jsxs)("div",{className:"ml-3 pl-1 pb-1 mt-4 flex title-divider",children:[(0,l.jsx)("h2",{className:"flex-1",children:"Events"}),(0,l.jsx)("button",{className:"main-btn sm flex-2",onClick:()=>{t.events=[...e.sources[a].events,new o("".concat(t.sourceName,"Event"))],i(t)},children:"+ Add Event"})]}),(0,l.jsx)("div",{className:"ml-3 events-holder",children:t.events.map((e,s)=>{let n=e=>{t.events[s]={...t.events[s],...e},i({...t})};return(0,l.jsxs)("div",{className:"pl-5 pb-1 pt-4",children:[(0,l.jsxs)("div",{className:"pb-1 flex title-sub-divider",children:[(0,l.jsx)("h2",{className:"flex-1 font-bold",children:e.eventName}),(0,l.jsx)("button",{className:"main-btn sm flex-2",onClick:()=>{let e=[...t.events];e.splice(a,1),i({events:e})},children:"- Remove Event"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-6 pl-2 pt-2",children:[(0,l.jsx)("label",{className:"mr-2 p-1 form-label",htmlFor:"event-name-".concat(a,"-").concat(s),children:"Event Name"}),(0,l.jsx)("input",{className:"col-span-5 text-input p-1",type:"text",id:"event-name-".concat(a,"-").concat(s),name:"event-name-".concat(a,"-").concat(s),onChange:e=>n({eventName:e.target.value}),value:e.eventName})]}),(0,l.jsxs)("div",{className:"grid grid-cols-6 pl-2 pt-2 pb-2",children:[(0,l.jsx)("label",{className:"mr-2 p-1 form-label",htmlFor:"actor".concat(a,"-").concat(s),children:"Specific Actor"}),(0,l.jsx)("input",{className:"col-span-5 text-input p-1",type:"text",id:"actor".concat(a,"-").concat(s),name:"actor".concat(a,"-").concat(s),onChange:e=>n({actorField:e.target.value}),value:e.actorField})]}),(0,l.jsxs)("div",{className:"inc-list-header flex",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("label",{className:"title",children:"Targets"})}),(0,l.jsx)("button",{className:"flex-2 main-btn add-btn",onClick:()=>n({targetFields:[...e.targetFields,""]}),children:"+ Add Target"})]}),(0,l.jsx)("div",{className:"inc-list p-4 pr-2 m-2 mt-5 mr-0",children:0==e.targetFields.length?(0,l.jsx)("p",{children:"No targets"}):e.targetFields.map((t,s)=>(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("input",{className:"text-input p-1",type:"text",onChange:t=>{let l=[...e.targetFields];l[s]=t.target.value,n({targetFields:l})},value:e.targetFields[s]}),(0,l.jsx)("button",{className:"col-span-1 main-btn remove-btn",onClick:()=>{let t=[...e.targetFields];t.splice(s,1),n({targetFields:t})},children:"-"})]},"".concat(s)))})]},"".concat(a,"-").concat(s))})})]})]},a)})]}),(0,l.jsx)(c.A,{className:"flex-1",value:u,language:"dart",placeholder:"// code here",onChange:e=>g(e.target.value),padding:15,"data-color-mode":"dark",style:{fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace",overflowY:"scroll"}})]}),(0,l.jsxs)("footer",{className:"footer h-[4dvh] text-xs  p-2 text-center",children:["Aipim - ",(0,l.jsx)("b",{children:"AWS Interfaced Painless Identifier Mapping"})," - Made by @romulets and @kubasobon (Elastic 2025)"]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[393,643,441,517,358],()=>t(8586)),_N_E=e.O()}]);